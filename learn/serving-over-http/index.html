<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="google-site-verification" content="wt4jHZa0ru-stSJJrlY5sSJzj9MB0ZA6BzkprNilZdM"/><title>HTTP를 통한 서빙 | GraphQL</title><meta name="viewport" content="width=640"/><meta property="og:title" content="GraphQL: API를 위한 쿼리 언어"/><meta property="og:description" content="GraphQL은 API에 있는 데이터에 대한 완벽하고 이해하기 쉬운 설명을 제공하고 클라이언트에게 필요한 것을 정확하게 요청할 수 있는 기능을 제공하며 시간이 지남에 따라 API를 쉽게 진화시키고 강력한 개발자 도구를 지원합니다."/><meta property="og:type" content="website"/><meta property="og:url" content="http://graphql-kr.github.io"/><meta property="og:image" content="/img/og_image.png"/><meta property="og:image:type" content="image/png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@graphql"/><meta name="twitter:title" content="GraphQL: API를 위한 쿼리 언어"/><meta name="twitter:description" content="GraphQL gives clients the power to ask for exactly what they need and nothing more, making it easier to evolve APIs over time."/><meta name="twitter:image" content="/img/twitter_image.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="home" type="application/rss+xml" href="/blog/rss.xml" title="GraphQL Team Blog"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300|Roboto:300"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,600"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css" rel="stylesheet" type="text/css"/></head><body><header><section><a class="nav-home" href="/"><img class="nav-logo" src="/img/logo.svg" width="30" height="30"/>GraphQL</a><nav><a href="/learn/">배우기</a><a href="/code/">코드</a><a href="/community/">커뮤니티</a><a href="/blog/">블로그</a><a href="http://facebook.github.io/graphql/" target="_blank" rel="noopener noreferrer">명세</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="문서 검색"/></div></section></header><section><div class="documentationContent"><div class="inner-content"><h1>HTTP를 통한 서빙</h1><div><p>HTTP는 어디서나 사용되기 때문에 GraphQL을 사용할 때 클라이언트-서버 통신 프로토콜에도 가장 일반적으로 사용됩니다. 아래는 GraphQL 서버를 HTTP를 통해 작동하도록 세팅하기 위한 몇 가지 가이드라인입니다.</p><h2><a class="anchor" name="web-request-pipeline"></a>Web Request Pipeline <a class="hash-link" href="#web-request-pipeline">#</a></h2><p>대부분의 최신 웹 프레임 워크는 요청이 미들웨어 스택(필터/플러그인)을 통과하는 파이프라인 모델을 사용합니다. 요청이 파이프라인을 통과할 때 응답으로 검사, 변환, 수정, 종료할 수 있습니다. GraphQL은 모든 인증 미들웨어의 뒤쪽에 있어야하므로 HTTP 엔드포인트 핸들러에서와 동일한 세션과 사용자 정보에 접근할 수 있습니다.</p><h2><a class="anchor" name="uris-routes"></a>URIs, Routes <a class="hash-link" href="#uris-routes">#</a></h2><p>HTTP는 일반적으로 <code>리소스</code>을 핵심 개념으로 사용하는 REST와 관련이 있습니다. 반대로, GraphQL의 개념 모델은 엔티티 그래프입니다. 그래서, GraphQL의 엔티티는 URL로 식별되지 않습니다. 대신, GraphQL 서버는 단일 URL/endpoint(일반적으로 <code>/graphql</code>)에서 작동하며, 주어진 서비스에 대한 모든 GraphQL 요청은 이 엔드포인트에서 수행되어야 합니다.</p><h2><a class="anchor" name="http-methods-headers-and-body"></a>HTTP Methods, Headers, and Body <a class="hash-link" href="#http-methods-headers-and-body">#</a></h2><p>GraphQL HTTP 서버는 HTTP GET, POST 메서드를 처리해야합니다.</p><h3><a class="anchor" name="get-request"></a>GET request <a class="hash-link" href="#get-request">#</a></h3><p>HTTP GET 요청을 수신하면, GraphQL 요청을 <code>query</code> 쿼리스트링에 지정해야합니다. 예를 들어, 다음 GraphQL 쿼리를 실행하고자 한다면,</p><pre class="prism language-graphql"><span class="punctuation">{</span>
  me <span class="punctuation">{</span>
    name
  <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>이 요청은 다음과 같이 HTTP GET을 통해 전송될 수 있습니다.</p><pre class="prism language-undefined">http<span class="punctuation">:</span><span class="operator">/</span><span class="operator">/</span>myapi<span class="operator">/</span>graphql<span class="operator">?</span>query<span class="operator">=</span><span class="punctuation">{</span>me<span class="punctuation">{</span>name<span class="punctuation">}</span><span class="punctuation">}</span></pre><p>쿼리 변수는 <code>variables</code> 라는 추가 쿼리파라미터에서 JSON 인코딩 문자열로 보낼 수 있습니다. 쿼리에 여러 개의 명명된 작업이 포함되어 있으면 <code>operationName</code> 쿼리 매개 변수를 사용하여 어느 쿼리를 실행해야 하는지 제어할 수 있습니다.</p><h3><a class="anchor" name="post-request"></a>POST request <a class="hash-link" href="#post-request">#</a></h3><p>표준 GraphQL POST 요청은 <code>application/json</code> content-type을 사용해야하며 아래 형식의 JSON 인코딩 바디을 포함해야합니다.</p><pre class="prism language-js"><span class="punctuation">{</span>
  <span class="string">&quot;query&quot;</span><span class="punctuation">:</span> <span class="string">&quot;...&quot;</span><span class="punctuation">,</span>
  <span class="string">&quot;operationName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;...&quot;</span><span class="punctuation">,</span>
  <span class="string">&quot;variables&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="string">&quot;myVariable&quot;</span><span class="punctuation">:</span> <span class="string">&quot;someValue&quot;</span><span class="punctuation">,</span> <span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span> <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p><code>operationName</code> 과 <code>variables</code> 는 옵셔널 필드입니다. <code>operationName</code> 은 쿼리에 여러 작업이 있는 경우에만 필요합니다.</p><p>위 내용 외에도 추가로 두 가지 경우를 지원하는 것이 좋습니다.</p><ul><li><p><code>query</code> (위 GET 예제처럼)쿼리스트링 파라미터가 있는 경우, HTTP GET의 경우와 같은 방식으로 구문 분석되고 처리되어야 합니다.</p></li><li><p><code>application/graphql</code> Content-Type header가 있는 경우 HTTP POST body 내용을 GraphQL 쿼리스트링으로 처리합니다.</p></li></ul><p><code>express-graphql</code> 에는 이러한 것들이 이미 구현되어 있습니다.</p><h2><a class="anchor" name="response"></a>Response <a class="hash-link" href="#response">#</a></h2><p>쿼리와 변수가 전송된 방식에 관계없이, 응답은 요청 바디에 JSON 형식으로 반환되어야합니다. 명세에서 언급했듯이, 쿼리는 데이터와 오류를 유발할 수 있으며, 이러한 오류는 다음과 같은 JSON 객체 형식으로 반환되어야합니다.</p><pre class="prism language-js"><span class="punctuation">{</span>
  <span class="string">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span> <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="string">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span> <span class="punctuation">]</span>
<span class="punctuation">}</span></pre><p>오류가 없는 경우 응답에 <code>&quot;errors&quot;</code> 필드가 없어야합니다. 데이터가 반환되지 않으면 <a href="http://facebook.github.io/graphql/#sec-Data" target="_blank" rel="nofollow noopener noreferrer">GraphQL 명세에 따라서</a>, <code>&quot;data&quot;</code> 필드는 실행 중 에러가 발생했을 때만 포함되어야합니다.</p><h2><a class="anchor" name="graphiql"></a>GraphiQL <a class="hash-link" href="#graphiql">#</a></h2><p>GraphiQL은 테스트 및 개발 중에 유용하지만, 기본적으로 프로덕션 환경에서 사용하지 않도록 설정해야합니다. <code>express-graphql</code> 을 사용하는 경우 NODE_ENV 환경 변수로 토글할 수 있습니다.</p><pre class="prism language-js">app<span class="punctuation">.</span><span class="function">use</span><span class="punctuation">(</span><span class="string">&#x27;/graphql&#x27;</span><span class="punctuation">,</span> <span class="function">graphqlHTTP</span><span class="punctuation">(</span><span class="punctuation">{</span>
  schema<span class="punctuation">:</span> MySessionAwareGraphQLSchema<span class="punctuation">,</span>
  graphiql<span class="punctuation">:</span> process<span class="punctuation">.</span>env<span class="punctuation">.</span>NODE_ENV <span class="operator">===</span> <span class="string">&#x27;development&#x27;</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span></pre><h2><a class="anchor" name="node"></a>Node <a class="hash-link" href="#node">#</a></h2><p>NodeJS를 사용하는 경우, 다음 중 하나를 사용하는 것이 좋습니다.</p><ul><li><p><a href="https://github.com/graphql/express-graphql" target="_blank" rel="nofollow noopener noreferrer">express-graphql</a></p></li><li><p><a href="https://github.com/apollostack/graphql-server" target="_blank" rel="nofollow noopener noreferrer">graphql-server</a>.</p></li></ul></div><a class="read-next" href="/learn/authorization"><span class="read-next-continue">계속 읽기 →</span><span class="read-next-title">인증</span></a></div><div class="nav-docs"><div><h3>배우기</h3><ul><li><a style="margin-left:0;" class="active" href="/learn/">소개</a></li><li><a style="margin-left:0;" class="active" href="/learn/queries/">쿼리 &amp; 뮤테이션</a><ul><li><a href="/learn/queries/#">필드</a></li><li><a href="/learn/queries/#">인자</a></li><li><a href="/learn/queries/#">별칭</a></li><li><a href="/learn/queries/#">프래그먼트</a></li><li><a href="/learn/queries/#">작업 이름</a></li><li><a href="/learn/queries/#">변수</a></li><li><a href="/learn/queries/#">지시어</a></li><li><a href="/learn/queries/#">뮤테이션</a></li><li><a href="/learn/queries/#">인라인 프래그먼트</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/schema/">스키마 &amp; 타입</a><ul><li><a href="/learn/schema/#">타입 시스템</a></li><li><a href="/learn/schema/#">타입 언어</a></li><li><a href="/learn/schema/#">객체 타입과 필드</a></li><li><a href="/learn/schema/#">인자</a></li><li><a href="/learn/schema/#">쿼리 타입 &amp; 뮤테이션 타입</a></li><li><a href="/learn/schema/#">스칼라 타입</a></li><li><a href="/learn/schema/#">열거형 타입</a></li><li><a href="/learn/schema/#non-null">리스트와 Non-Null</a></li><li><a href="/learn/schema/#">인터페이스</a></li><li><a href="/learn/schema/#">유니온 타입</a></li><li><a href="/learn/schema/#">입력 타입</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/validation/">검증</a></li><li><a style="margin-left:0;" class="active" href="/learn/execution/">실행</a></li><li><a style="margin-left:0;" class="active" href="/learn/introspection/">스키마 확인</a></li></ul></div><div><h3>모범 사례</h3><ul><li><a style="margin-left:0;" class="active" href="/learn/best-practices/">소개</a></li><li><a style="margin-left:0;" class="active" href="/learn/thinking-in-graphs/">그래프로 생각하기</a></li><li><a style="margin-left:0;" class="active" href="/learn/serving-over-http/">HTTP를 통한 서빙</a></li><li><a style="margin-left:0;" class="active" href="/learn/authorization/">인증</a></li><li><a style="margin-left:0;" class="active" href="/learn/pagination/">페이지네이션</a></li><li><a style="margin-left:0;" class="active" href="/learn/caching/">캐싱</a></li></ul></div></div></div></section><footer><section class="sitemap"><a href="/" class="nav-home"></a><div><h5><a href="/learn/">배우기</a></h5><a href="/learn/">소개</a><a href="/learn/queries/">쿼리 언어</a><a href="/learn/schema/">타입 시스템</a><a href="/learn/execution/">실행</a><a href="/learn/best-practices/">모범 사례</a></div><div><h5><a href="/code">코드</a></h5><a href="/code/#server-libraries">서버</a><a href="/code/#graphql-clients">클라이언트</a><a href="/code/#tools">도구</a></div><div><h5><a href="/community">커뮤니티</a></h5><a href="/community/upcoming-events/">이벤트</a><a href="http://stackoverflow.com/questions/tagged/graphql" target="_blank" rel="noopener noreferrer">스택 오버플로우</a><a href="https://www.facebook.com/groups/graphql.community/" target="_blank" rel="noopener noreferrer">페이스북 그룹</a><a href="https://twitter.com/GraphQL" target="_blank" rel="noopener noreferrer">트위터</a></div><div><h5>기타</h5><a href="/blog">GraphQL 팀 블로그</a><a href="http://facebook.github.io/graphql/" target="_blank" rel="noopener noreferrer">명세</a><a href="https://github.com/graphql" target="_blank" rel="noopener noreferrer">깃허브</a><a href="https://github.com/graphql/graphql.github.io/edit/source/site/learn/BestPractice-ServingOverHTTP.md" target="_blank" rel="noopener noreferrer">이 페이지 수정 ✎</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noopener noreferrer" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright ©<span><script>document.write(new Date().getFullYear())</script> </span><noscript>2017 </noscript>Facebook Inc. The contents of this page are licensed BSD-3-Clause.</section></footer><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
        docsearch({
          apiKey: 'd103541f3e6041148aade2e746ed4d61',
          indexName: 'graphql',
          inputSelector: '#algolia-search-input'
        });
      </script><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-99001722-7', 'auto');
ga('send', 'pageview');
      </script></body></html>